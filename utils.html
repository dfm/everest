

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>utils.py - General utils &mdash; everest</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="everest" href="index.html"/>
        <link rel="up" title="Code Engine" href="engine.html"/>
        <link rel="next" title="Missions" href="missions.html"/>
        <link rel="prev" title="transit.py - Transit models" href="transit.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> everest
          

          
          </a>

          
            
            
              <div class="version">
                2.0.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="using_everest.html">Using Everest</a></li>
<li class="toctree-l1"><a class="reference internal" href="catalog.html">The Catalog</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="code.html">The Code</a><ul class="current">
<li class="toctree-l2"><a class="reference external" href="https://github.com/rodluger/everest">Github Project Page</a></li>
<li class="toctree-l2"><a class="reference internal" href="ui.html">User Interface</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="engine.html">Code Engine</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="basecamp.html"><code class="docutils literal"><span class="pre">basecamp.py</span></code> - The Everest base class</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html"><code class="docutils literal"><span class="pre">config.py</span></code> - Misc settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="detrender.html"><code class="docutils literal"><span class="pre">detrender.py</span></code> - De-trending models</a></li>
<li class="toctree-l3"><a class="reference internal" href="dvs.html"><code class="docutils literal"><span class="pre">dvs.py</span></code> - Data Validation Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="fits.html"><code class="docutils literal"><span class="pre">fits.py</span></code> - FITS conversion</a></li>
<li class="toctree-l3"><a class="reference internal" href="gp.html"><code class="docutils literal"><span class="pre">gp.py</span></code> - Gaussian Processes</a></li>
<li class="toctree-l3"><a class="reference internal" href="inject.html"><code class="docutils literal"><span class="pre">inject.py</span></code> - Transit injection</a></li>
<li class="toctree-l3"><a class="reference internal" href="masksolve.html"><code class="docutils literal"><span class="pre">masksolve.py</span></code> - Solve a masked linear problem quickly</a></li>
<li class="toctree-l3"><a class="reference internal" href="math.html"><code class="docutils literal"><span class="pre">mathutils.py</span></code> - Math utils</a></li>
<li class="toctree-l3"><a class="reference internal" href="pool.html"><code class="docutils literal"><span class="pre">pool.py</span></code> - Multiprocessing</a></li>
<li class="toctree-l3"><a class="reference internal" href="standalone.html"><code class="docutils literal"><span class="pre">standalone.py</span></code> - Standalone de-trending</a></li>
<li class="toctree-l3"><a class="reference internal" href="transit.html"><code class="docutils literal"><span class="pre">transit.py</span></code> - Transit models</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#"><code class="docutils literal"><span class="pre">utils.py</span></code> - General utils</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="missions.html">Missions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="papers.html">The Papers</a></li>
<li class="toctree-l1"><a class="reference internal" href="previous.html">Old Versions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">everest</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          

 



<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">everest</a> &raquo;</li>
      
        <li><a href="code.html">The Code</a>&raquo;</li>
      
        <li><a href="engine.html">Code Engine</a>&raquo;</li>
      
    
      <li><code class="docutils literal"><span class="pre">utils.py</span></code> - General utils</li>
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <span class="target" id="module-everest.utils"></span><div class="section" id="utils-py-general-utils">
<h1><code class="xref py py-mod docutils literal"><span class="pre">utils.py</span></code> - General utils<a class="headerlink" href="#utils-py-general-utils" title="Permalink to this headline">¶</a></h1>
<p>General utility functions called from various parts of the code.</p>
<dl class="data">
<dt id="everest.utils.AP_COLLAPSED_PIXEL">
<code class="descclassname">everest.utils.</code><code class="descname">AP_COLLAPSED_PIXEL</code><em class="property"> = 9</em><a class="headerlink" href="#everest.utils.AP_COLLAPSED_PIXEL" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a pixel into which a row was collapsed.
Note that <code class="docutils literal"><span class="pre">AP_COLLAPSED_PIXEL</span> <span class="pre">&amp;</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">1</span></code></p>
</dd></dl>

<dl class="data">
<dt id="everest.utils.AP_SATURATED_PIXEL">
<code class="descclassname">everest.utils.</code><code class="descname">AP_SATURATED_PIXEL</code><em class="property"> = 8</em><a class="headerlink" href="#everest.utils.AP_SATURATED_PIXEL" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a saturated pixel that was masked out.
Note that <code class="docutils literal"><span class="pre">AP_SATURATED_PIXEL</span> <span class="pre">&amp;</span> <span class="pre">1</span> <span class="pre">=</span> <span class="pre">0</span></code></p>
</dd></dl>

<dl class="class">
<dt id="everest.utils.DataContainer">
<em class="property">class </em><code class="descclassname">everest.utils.</code><code class="descname">DataContainer</code><a class="headerlink" href="#everest.utils.DataContainer" title="Permalink to this definition">¶</a></dt>
<dd><p>A generic data container. Nothing fancy here.</p>
</dd></dl>

<dl class="function">
<dt id="everest.utils.ExceptionHook">
<code class="descclassname">everest.utils.</code><code class="descname">ExceptionHook</code><span class="sig-paren">(</span><em>exctype</em>, <em>value</em>, <em>tb</em><span class="sig-paren">)</span><a class="headerlink" href="#everest.utils.ExceptionHook" title="Permalink to this definition">¶</a></dt>
<dd><p>A custom exception handler that logs errors to file.</p>
</dd></dl>

<dl class="function">
<dt id="everest.utils.ExceptionHookPDB">
<code class="descclassname">everest.utils.</code><code class="descname">ExceptionHookPDB</code><span class="sig-paren">(</span><em>exctype</em>, <em>value</em>, <em>tb</em><span class="sig-paren">)</span><a class="headerlink" href="#everest.utils.ExceptionHookPDB" title="Permalink to this definition">¶</a></dt>
<dd><p>A custom exception handler, with <a class="reference external" href="https://docs.python.org/2/library/pdb.html#module-pdb" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">pdb</span></code></a> post-mortem for debugging.</p>
</dd></dl>

<dl class="class">
<dt id="everest.utils.Formatter">
<em class="property">class </em><code class="descclassname">everest.utils.</code><code class="descname">Formatter</code><a class="headerlink" href="#everest.utils.Formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Custom function formatters for displaying ticks on plots.</p>
<dl class="attribute">
<dt id="everest.utils.Formatter.CDPP">
<code class="descname">CDPP</code><em class="property"> = &lt;matplotlib.ticker.FuncFormatter object&gt;</em><a class="headerlink" href="#everest.utils.Formatter.CDPP" title="Permalink to this definition">¶</a></dt>
<dd><p>Integer formatter for a CDPP axis</p>
</dd></dl>

<dl class="attribute">
<dt id="everest.utils.Formatter.CDPP1F">
<code class="descname">CDPP1F</code><em class="property"> = &lt;matplotlib.ticker.FuncFormatter object&gt;</em><a class="headerlink" href="#everest.utils.Formatter.CDPP1F" title="Permalink to this definition">¶</a></dt>
<dd><p>Floating point formatter for a CDPP axis (1 digit after decimal)</p>
</dd></dl>

<dl class="attribute">
<dt id="everest.utils.Formatter.CDPP2F">
<code class="descname">CDPP2F</code><em class="property"> = &lt;matplotlib.ticker.FuncFormatter object&gt;</em><a class="headerlink" href="#everest.utils.Formatter.CDPP2F" title="Permalink to this definition">¶</a></dt>
<dd><p>Floating point formatter for a CDPP axis (2 digits after decimal)</p>
</dd></dl>

<dl class="attribute">
<dt id="everest.utils.Formatter.Chunk">
<code class="descname">Chunk</code><em class="property"> = &lt;matplotlib.ticker.FuncFormatter object&gt;</em><a class="headerlink" href="#everest.utils.Formatter.Chunk" title="Permalink to this definition">¶</a></dt>
<dd><p>Integer formatter for chunk number</p>
</dd></dl>

<dl class="attribute">
<dt id="everest.utils.Formatter.Flux">
<code class="descname">Flux</code><em class="property"> = &lt;matplotlib.ticker.FuncFormatter object&gt;</em><a class="headerlink" href="#everest.utils.Formatter.Flux" title="Permalink to this definition">¶</a></dt>
<dd><p>Integer formatter for a flux axis</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="everest.utils.FunctionWrapper">
<em class="property">class </em><code class="descclassname">everest.utils.</code><code class="descname">FunctionWrapper</code><span class="sig-paren">(</span><em>f</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#everest.utils.FunctionWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>A simple function wrapper class. Stores <code class="xref py py-obj docutils literal"><span class="pre">args</span></code> and
<code class="xref py py-obj docutils literal"><span class="pre">kwargs</span></code> and allows an arbitrary function to be called with a
single parameter <code class="xref py py-obj docutils literal"><span class="pre">x</span></code></p>
</dd></dl>

<dl class="function">
<dt id="everest.utils.InitLog">
<code class="descclassname">everest.utils.</code><code class="descname">InitLog</code><span class="sig-paren">(</span><em>file_name=None</em>, <em>log_level=10</em>, <em>screen_level=50</em>, <em>pdb=False</em><span class="sig-paren">)</span><a class="headerlink" href="#everest.utils.InitLog" title="Permalink to this definition">¶</a></dt>
<dd><p>A little routine to initialize the logging functionality.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>file_name</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The name of the file to log to.            Default <a class="reference external" href="https://docs.python.org/2/library/constants.html#None" title="(in Python v2.7)"><code class="xref py py-obj docutils literal"><span class="pre">None</span></code></a> (set internally by <code class="xref py py-mod docutils literal"><span class="pre">everest</span></code>)</li>
<li><strong>log_level</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – The file logging level (0-50). Default 10 (debug)</li>
<li><strong>screen_level</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#int" title="(in Python v2.7)"><em>int</em></a>) – The screen logging level (0-50).            Default 50 (critical)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="everest.utils.NoPILFilter">
<em class="property">class </em><code class="descclassname">everest.utils.</code><code class="descname">NoPILFilter</code><span class="sig-paren">(</span><em>name=''</em><span class="sig-paren">)</span><a class="headerlink" href="#everest.utils.NoPILFilter" title="Permalink to this definition">¶</a></dt>
<dd><p>The <code class="xref py py-obj docutils literal"><span class="pre">PIL</span></code> image module has a nasty habit of sending all sorts of
unintelligible information to the logger. We filter that out here.</p>
</dd></dl>

<dl class="function">
<dt id="everest.utils.prange">
<code class="descclassname">everest.utils.</code><code class="descname">prange</code><span class="sig-paren">(</span><em>*x</em><span class="sig-paren">)</span><a class="headerlink" href="#everest.utils.prange" title="Permalink to this definition">¶</a></dt>
<dd><p>Progress bar range with <cite>tqdm</cite></p>
</dd></dl>

<dl class="function">
<dt id="everest.utils.sort_like">
<code class="descclassname">everest.utils.</code><code class="descname">sort_like</code><span class="sig-paren">(</span><em>l</em>, <em>col1</em>, <em>col2</em><span class="sig-paren">)</span><a class="headerlink" href="#everest.utils.sort_like" title="Permalink to this definition">¶</a></dt>
<dd><p>Sorts the list <code class="xref py py-obj docutils literal"><span class="pre">l</span></code> by comparing <code class="xref py py-obj docutils literal"><span class="pre">col2</span></code> to <code class="xref py py-obj docutils literal"><span class="pre">col1</span></code>.
Specifically, finds the indices <code class="xref py py-obj docutils literal"><span class="pre">i</span></code> such that <code class="docutils literal"><span class="pre">col2[i]</span> <span class="pre">=</span> <span class="pre">col1</span></code>
and returns <code class="docutils literal"><span class="pre">l[i]</span></code>. This is useful when comparing the CDPP values of
catalogs generated by different pipelines. The
target IDs are all the same, but won’t necessarily be in the same order.
This allows <code class="xref py py-obj docutils literal"><span class="pre">everest</span></code> to sort the CDPP arrays so that the
targets match.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>l</strong> (<em>array_like</em>) – The list or array to sort</li>
<li><strong>col1</strong> (<em>array_like</em>) – A list or array (same length as <code class="xref py py-obj docutils literal"><span class="pre">l</span></code>)</li>
<li><strong>col2</strong> (<em>array_like</em>) – A second list or array containing the same            elements as <code class="xref py py-obj docutils literal"><span class="pre">col1</span></code> but in a different order</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-47070068-3', 'auto');
  ga('send', 'pageview');

</script>

           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="missions.html" class="btn btn-neutral float-right" title="Missions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="transit.html" class="btn btn-neutral" title="transit.py - Transit models" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Rodrigo Luger.
      Last updated on Dec 08, 2017.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'2.0.9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>